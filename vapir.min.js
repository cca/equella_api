!function(t){window.vapir=function(a,e,r){var n="https://vault.cca.edu/api/search",s=t(e),r=r||{},o=function(t,a){s.html('<p class="text-danger">Error requesting data.<p><small>Status: '+a)},h=function(a){var e="";console.log(a),0===a.length?e="No search results :(":(e="<ul>",t.each(a.results,function(t,a){var r,n="";if(a.attachments&&a.attachments.length>0){for(var s=0,o=a.attachments.length,h=[];o>s;s++)h.push(a.attachments[s].links.thumbnail);r=Math.floor(Math.random()*h.length),n='<img src="'+h[r]+'">'}e+='<li><a href="'+a.links.view+'">'+n+"<strong>"+a.name+"</a></strong>"})),s.html(e).show(r.show)};r.show=r.show||"slow";for(var l,c=0,i=["collections","info"],u=i.length;u>c;c++)l=r[i[c]],t.isArray(l)&&(l=l.join(","));t.ajax({cache:!0,data:{start:r.start||0,length:r.length||5,q:a,order:r.order||"relevance",reverse:r.reverse||!1,showall:r.showall||!0,info:r.info||"basic,attachment"},dataType:"json",error:o,headers:{"X-Authorization-Token":"c431f56c-f604-4b22-89cc-4ab321a90e64"},url:n,success:h})}}(jQuery);